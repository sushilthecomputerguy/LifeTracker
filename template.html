<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Start Templates</title>
    <link rel="stylesheet" href="styles.css">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#fef5eb">
<link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
 
<div class="container">
    <h1>Quick Start Templates</h1>
    <p class="subtitle">Choose a template to quickly create a tracker</p>

    <!-- â”€â”€ Templates Section â”€â”€ -->
    <div class="templates-section">
        <h3 style="margin-bottom: 12px;">Quick Start Templates</h3>
        <div class="templates-grid" id="templatesGrid"></div>
    </div>


</div>

<div class="bottom-navigation">
            <div><a href="trackers.html"><img src="folder-icon.svg"/><br/>Tracker</a></div>
            <div><a href="report.html"><img src="report-icon.svg"/><br/>Report</a></div>
            <div><a href="index.html"><img src="today-icon.svg"/><br/>My Day</a></div>
            <div><a href="settings.html"><img src="setting-icon.svg"/><br/>Settings</a></div>
        </div>
 
<script>
/* â•â•â• INDEXEDDB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let db;
const DB_NAME = 'TrackerDB';
const STORE_NAME = 'trackers';

function initDB() {
    const req = indexedDB.open(DB_NAME, 2);

    req.onupgradeneeded = (e) => {
        db = e.target.result;
        if (!db.objectStoreNames.contains(STORE_NAME)) {
            db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });
        }
    };

    req.onsuccess = (e) => {
        db = e.target.result;
        loadTemplates();
    };

    req.onerror = (e) => {
        console.error('IndexedDB error:', e);
    };
}

function addTracker(tracker) {
    return new Promise((res, rej) => {
        const req = db.transaction([STORE_NAME],'readwrite').objectStore(STORE_NAME).add(tracker);
        req.onsuccess = () => res(req.result);
        req.onerror   = () => rej(req.error);
    });
}

/* â•â•â• STARTER TEMPLATES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TEMPLATES = [
    { title: 'Daily Mood', type: 'dropdown', options: [
        {title:'Very Happy', color:'#4CAF50'}, {title:'Happy', color:'#8BC34A'}, 
        {title:'Neutral', color:'#FFC107'}, {title:'Sad', color:'#FF9800'}, {title:'Very Sad', color:'#F44336'}
    ]},
    { title: 'Sleep Quality', type: 'dropdown', options: [
        {title:'Excellent', color:'#4CAF50'}, {title:'Good', color:'#8BC34A'},
        {title:'Fair', color:'#FFC107'}, {title:'Poor', color:'#FF9800'}, {title:'Terrible', color:'#F44336'}
    ]},
    { title: 'Exercise', type: 'dropdown', options: [
        {title:'Intense Workout', color:'#E91E63'}, {title:'Moderate Exercise', color:'#9C27B0'},
        {title:'Light Activity', color:'#673AB7'}, {title:'Stretching', color:'#3F51B5'}, {title:'No Exercise', color:'#9E9E9E'}
    ]},
    { title: 'Meditation', type: 'yesno' },
    { title: 'Weight', type: 'numeric', numericPrefix: '', numericSuffix: 'lbs' },
    { title: 'Water Intake', type: 'numeric', numericPrefix: '', numericSuffix: 'glasses' },
    { title: 'Daily Journal', type: 'text' },
    { title: 'Gratitude', type: 'text' }
];

function typeLabel(t) {
    return {dropdown:'Dropdown', yesno:'Yes/No', numeric:'Numeric', text:'Text'}[t] || 'Dropdown';
}

function loadTemplates() {
    const grid = document.getElementById('templatesGrid');
    grid.innerHTML = TEMPLATES.map(t => `
        <button class="template-btn" onclick='useTemplate(${JSON.stringify(t)})'>
            ${t.title}
            <div class="template-type">${typeLabel(t.type)}</div>
        </button>
    `).join('');
}

async function useTemplate(template) {
    const tracker = {
        title: template.title,
        type: template.type,
        createdAt: new Date().toISOString()
    };
    if (template.options) {
        tracker.options = template.options;
        tracker.displayStyle = 'radio';
    }
    if (template.numericPrefix !== undefined) tracker.numericPrefix = template.numericPrefix;
    if (template.numericSuffix !== undefined) tracker.numericSuffix = template.numericSuffix;

    await addTracker(tracker);
    
    // Show success message and redirect
    alert(`"${template.title}" tracker created!\n\nRedirecting to your trackers...`);
    window.location.href = 'trackers.html';
}

/* â•â•â• BOOT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
initDB();
</script>







    <script>
        /**
 * theme.js  â€”  drop this into every page
 *
 * What it does:
 *  1. On load: reads saved preference from localStorage.
 *              Falls back to OS preference (prefers-color-scheme).
 *              Applies data-theme to <html> BEFORE paint (no flash).
 *  2. Toggle:  clicking .theme-toggle cycles light â†” dark and saves choice.
 *  3. Sync:    listens for OS-level changes in case the user switches in
 *              system settings and has no manual preference saved.
 */

(function () {
  const STORAGE_KEY = 'theme';
  const LIGHT = 'light';
  const DARK  = 'dark';

  // â”€â”€ 1. Resolve theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function getSystemTheme() {
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? DARK : LIGHT;
  }

  function getSavedTheme() {
    return localStorage.getItem(STORAGE_KEY); // null if never set
  }

  function resolveTheme() {
    return getSavedTheme() || getSystemTheme();
  }

  // â”€â”€ 2. Apply theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function applyTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    // Update every toggle button icon on the page
    document.querySelectorAll('.theme-toggle').forEach(btn => {
      btn.textContent = theme === DARK ? 'â˜€ï¸' : 'ğŸŒ™';
      btn.setAttribute('aria-label', theme === DARK ? 'Switch to light mode' : 'Switch to dark mode');
    });
  }

  // â”€â”€ 3. Toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function toggleTheme() {
    const current = document.documentElement.getAttribute('data-theme') || resolveTheme();
    const next    = current === DARK ? LIGHT : DARK;
    localStorage.setItem(STORAGE_KEY, next);
    applyTheme(next);
  }

  // â”€â”€ 4. Wire up toggle buttons (works for buttons added later too) â”€â”€
  //    We use event delegation on <body> so it works even if the button
  //    is injected by JS after DOMContentLoaded.
  function attachToggle() {
    document.body.addEventListener('click', function (e) {
      if (e.target.closest('.theme-toggle')) toggleTheme();
    });
  }

  // â”€â”€ 5. Sync with OS changes (only if user has no saved pref) â”€â”€
  function watchSystemTheme() {
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function (e) {
      if (!getSavedTheme()) {
        applyTheme(e.matches ? DARK : LIGHT);
      }
    });
  }

  // â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Apply before first paint to avoid flash
  applyTheme(resolveTheme());

  // Wire up after DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', attachToggle);
  } else {
    attachToggle();
  }

  watchSystemTheme();
})();
</script>

  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(() => console.log("Service Worker Registered"))
          .catch(err => console.log("SW failed:", err));
      });
    }
  </script>


</body>
</html>